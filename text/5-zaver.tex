\chapter{Závěr}
\label{5-zaver}
%Shrnutí cíle práce

%% ML: vyskrtnete ``moji'', jasne veci neni treba opakovat
%% LK: to je :-)
%% ML: odstavec - jedno ohromne souveti, prepiste...
%% LK: prepisu
Cílem bakalářské práce bylo vytvoření nové knihovny psané v
jazyce Python, která měla za úkol rozšířit funkcionalitu již existujícího
zásuvného modulu pro aplikaci QGIS. Rozšiřovaný zásuvný modul nyní usnadňuje práci pouze se zpoplatněnými českými
katastrálními daty ve formátu \zk{VFK}. Nové rozšíření mělo navíc umožňovat načítání neúplných veřejně
dostupných dat výměnného formátu katastru nemovitostí a sestavení bloků parcel a budov z načtených dat.

%Upřesněný výsledek
Cíl práce byl splněn. Podařilo se vytvořit takovou knihovnu, která splňuje výše zmíněné zadání.
%% ML: druha veta opakuje to co jiz bylo receno, preformulujte
%% LK: preformulovano
%% ML: neuplne -> verejne dostupne (tj. data bez bloku NEMO - pokud si dobre vzpominam)
%% LK: opraveno
Veřejně dostupná data neobsahují datovou skupinu Nemovitosti, ve které jsou bloky parcel a budov. Proto knihovna oba bloky sestavuje
%% ML: proc je to nutne? -> vizualizace dat v pluginu, nevim, zda to
%% mate nekde jasne receno, minimalne, zde by to melo byt ucineno
%% LK: dopsano
a ukládá je do databáze, která
vznikne při načtení dat VFK driverem[\ref{subsec:gdal_vfk}]
knihovny GDAL[\ref{sec:gdal}]. Sestavení obou bloků má pro funkčnost zásuvného modulu zásadní vliv, poněvadž jsou v mapovém okně QGISu[\ref{sec:qgis}] vizualizovány.

%Komplikace
Při vytváření knihovny se objevily komplikace, které tvorbu práce
zpomalily. Verze knihovny GDAL 2.1.3 nesestavuje geometrii automaticky
přímo při načítání dat, ale až po provedení dotazu na konkrétní
geometrii. Dále VFK Driver[\ref{subsec:gdal_vfk}] do vzniklé databáze po načtení dat
nepřidává tabulky s geometrií a souřadnicovým systémem, tudíž vzniklá
%% ML: SQLite driver
%% LK: prepsano
databáze není prostorová a SQLite driver nedokáže rozeznat typ geometrie datových
%% ML: hlavne typ geometrie (bloky jako takove ano)
%% LK: opraveno
bloků. Tabulky byly v databázi vytvořeny a SQL driver poté dokázal
typ geometrie bloků přečíst. V nejnovější verzi knihovny GDAL[\ref{sec:gdal}] jsou oba
nedostatky odstraněny. Rozšíření zásuvného modulu bylo vyvíjeno na
%% ML: veta o windows a vyvoji je zcela subjektivni, pokud umite
%% pouzivat vyvojove prostredky pod Windows, je to asi bajecny system
%% ;-)
%% ML: jde hlavne o to, ze byl testovan jak pod Linuxem a Windows, to
%% je podstatne
%% LK: veta o windows smazana
dvou operačních systémech -- Linux a Windows. Velkou komplikaci
způsobilo použití systémových proměnných, které v prostředí Linuxu
fungovalo a v prostředí Windows nikoliv. Situaci vyřešilo až
alternativní definování proměnné přes příkaz SetConfigOption().

%Výsledek
Výsledkem bakalářské práce je rozšířený zásuvný modul pro práci s daty
katastru nemovitostí ve formátu \zk{VFK} pro volně dostupný
geografický informační systém QGIS[\ref{sec:qgis}]. Přidané rozšíření umožňuje načít
nejen úplná, ale i neúplná data ve formátu \zk{VFK} a sestaví bloky
parcel a budov, které jsou v mapovém okně systému QGIS[\ref{sec:qgis}] vizualizovány
včetně parcelních čísel.

%Další vývoj
Funkčnost knihovny byla testována na datech z katastrálního území
Abertamy, které obsahuje 1680 parcel a 470 budov. Velikost \zk{VFK}
souboru je 6,7 MB. U objemnějších dat trvá sestavování geometrie
% ML: ve vete mate dvakrat sestaveni geometrie
% LK: odtraneno
výrazně déle. Sestavování geometrií by se dalo zrychlit, kdyby probíhalo přímo v
%% ML: proc? - GDAL ovladace jsou napsany v programovacim jazyku C++, ale ma to vice duvodu.
%% LK: jak by tedy bylo mozne sestavovani zrychlit?
prostředí VFK driveru. Navazující vývoj bude zprovoznění vyhledávání podle parcelního čísla i ve veřejně poskytovaných datech. Import dat je třeba přesunout do separátního vlákna, což umožní zobrazení informací o průběhu sestavování parcel a budov.

%Dokumentace
Tato práce svým obsahem podrobně dokumentuje funkčnost a způsob vzniku
%% ML: a jeji integrace do pluginu
%% LK: opraveno
nově vytvořené knihovny a její integrace do zásuvného modulu. V příloze jsou informace o knihovně ještě
rozšířeny o diagram popisující princip sestavení hranic
%% ML: posledni veta je prilis dlouha, zkuste preformulovat a zlepsit
%% stylistickou uroven
%% LK: opraveno
parcel \ref{fig:logika_geometrie}. Další přílohou je návod jak
načítat data do zásuvného modulu (\ref{sec:nacteni_dat_ukazka}). Poslední přílohou je návod na stažení
veřejně poskytovaných neúplných dat výměnného formátu
katastru(\ref{sec:stazeni_dat_ukazka}). Stažení těchto dat je potřebné pro využití nového rozšíření.

%Zdrojové kódy
%% ML: ve vasem gitu bakalarky (src)
%% LK: doplneno
Zdrojové kódy knihovny jsou ke stažení ve složce \textit{src} na adrese: \href{https://github.com/ctu-geoforall-lab-projects/bp-kettner-2018}{https://github.com/ctu-geoforall-lab-projects/bp-kettner-2018}.

%Distribuce
%Jaké problémy se objevily-operační systémy, jak se naplnila očekávání.
%Shrnout cíl práce a popsat výsledek-co knihovna/zásuvný modul nyní umí.
%Možnost dalšího vylepšení.
%% ML: doufam, ze bude kod zaclenen do repositare pluginu, pote jiz
%% bude distribuce standardni
%% LK: doplneno
Kód knihovny bude začleněn do repozitáře rozšiřovaného zásuvného modulu a distribuce bude standardní přes prostředí QGIS[\ref{sec:qgis}].
